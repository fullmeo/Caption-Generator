# ğŸ¤– Multi-Model AI Features - Caption Generator Pro

## ğŸ¯ Overview

Caption Generator now supports **multiple AI models** from different providers, allowing you to choose the best model for your needs or combine different models for analysis and caption generation.

---

## ğŸš€ Available AI Models

### OpenAI Models

#### GPT-4 Vision (`gpt-4-vision-preview`)
- **Best for:** Detailed visual analysis
- **Provider:** OpenAI
- **Use case:** Analyzing images, detecting instruments, understanding complex scenes
- **Strengths:**
  - Excellent object detection
  - Detailed scene understanding
  - Good with complex compositions

#### GPT-4 (`gpt-4`)
- **Best for:** Creative caption generation
- **Provider:** OpenAI
- **Use case:** Writing engaging, creative captions
- **Strengths:**
  - Highly creative
  - Natural language generation
  - Good at matching tone and style

### Anthropic Claude Models

#### Claude 3.5 Sonnet (`claude-3-5-sonnet-20241022`)
- **Best for:** Sophisticated reasoning and nuanced writing
- **Provider:** Anthropic
- **Use case:** Both analysis and caption generation
- **Strengths:**
  - Excellent reasoning
  - Nuanced understanding of context
  - Sophisticated writing style
  - Good at following complex instructions

#### Claude 3.5 Haiku (`claude-3-5-haiku-20241022`)
- **Best for:** Fast, efficient processing
- **Provider:** Anthropic
- **Use case:** Quick caption generation
- **Strengths:**
  - Very fast
  - Cost-effective
  - Still high quality
  - Good for batch processing

---

## ğŸ¨ Caption Styles

### Professional
- **Tone:** Formal and polished
- **Audience:** Industry professionals, established musicians
- **Emojis:** Minimal (2-3, professional only)
- **Example:**
  ```
  Exceptional performance at the Duc des Lombards last evening. The quartet demonstrated
  remarkable synergy and technical proficiency. An evening of authentic jazz at its finest.

  #jazz #jazzmusic #liveperformance #ducdetlombards #musicprofessional
  ```

### Casual
- **Tone:** Friendly and conversational
- **Audience:** General audience, fans
- **Emojis:** Moderate (4-6)
- **Example:**
  ```
  ğŸµ Had such an amazing time jamming with the crew tonight! The energy was incredible
  and the crowd was absolutely vibing with us. Can't wait for the next one! ğŸ¸âœ¨

  #livemusic #jazz #concert #musiclife #goodvibes
  ```

### Poetic
- **Tone:** Artistic and lyrical
- **Audience:** Art enthusiasts, music lovers
- **Emojis:** Selective (2-3, symbolic)
- **Example:**
  ```
  In the amber glow of stage lights, melodies weave through the night like whispers
  of forgotten dreams. Each note a brushstroke on the canvas of silence. ğŸ­

  #jazzpoetry #musicart #liveperformance #soulfulmusic
  ```

### Energetic
- **Tone:** High-energy and enthusiastic
- **Audience:** Younger demographic, party-goers
- **Emojis:** Generous (6-8)
- **Example:**
  ```
  ğŸ”¥ğŸ¸ WHAT A NIGHT!!! The energy was absolutely INSANE! ğŸµğŸ’¥ Best crowd ever,
  you guys were AMAZING!! Already can't wait for the next show! ğŸš€âœ¨ğŸ‰

  #livemusic #concert #party #energy #musicfestival #amazing
  ```

### Minimal
- **Tone:** Short and direct
- **Audience:** Minimalist aesthetic lovers
- **Emojis:** None or very minimal (0-1)
- **Example:**
  ```
  Live. Duc des Lombards.

  #jazz #live #paris
  ```

### Storytelling
- **Tone:** Narrative and engaging
- **Audience:** Engaged followers who read full captions
- **Emojis:** Strategic (3-5)
- **Example:**
  ```
  ğŸµ Walking into the club last night, I could already feel the anticipation in the
  air. By the second set, the whole room was moving as one. There's something magical
  about those moments when the music takes over and everyone just... gets it. âœ¨

  #musicstory #jazznight #liveperformance #musicianlife
  ```

---

## ğŸŒ Supported Languages

- **French (fr)** ğŸ‡«ğŸ‡· - FranÃ§ais
- **English (en)** ğŸ‡¬ğŸ‡§ - English
- **Spanish (es)** ğŸ‡ªğŸ‡¸ - EspaÃ±ol
- **German (de)** ğŸ‡©ğŸ‡ª - Deutsch
- **Italian (it)** ğŸ‡®ğŸ‡¹ - Italiano

All captions are generated by native-level AI in the selected language.

---

## ğŸ”§ API Endpoints

### Basic Endpoints

#### POST `/ai/analyze-advanced`
Analyze media with model selection
```bash
curl -X POST "http://localhost:8000/ai/analyze-advanced?model=claude-3-5-sonnet-20241022" \
  -F "file=@image.jpg"
```

#### POST `/ai/generate-styled-caption`
Generate caption with specific style
```bash
curl -X POST "http://localhost:8000/ai/generate-styled-caption" \
  -H "Content-Type: application/json" \
  -d '{"analysis": {...}, "style": "professional", "language": "en"}'
```

### Advanced Endpoint

#### POST `/ai/analyze-and-generate-pro`
Complete workflow with model selection

**Query Parameters:**
- `analysis_model`: Model for image analysis
- `caption_model`: Model for caption generation
- `style`: Caption style (professional, casual, poetic, etc.)
- `language`: Output language (fr, en, es, de, it)
- `musicians`: Comma-separated musician names
- `venue`: Venue name
- `custom_context`: Additional context

**Example:**
```bash
curl -X POST "http://localhost:8000/ai/analyze-and-generate-pro" \
  -F "file=@concert.jpg" \
  -F "analysis_model=claude-3-5-sonnet-20241022" \
  -F "caption_model=gpt-4" \
  -F "style=poetic" \
  -F "language=fr" \
  -F "venue=Duc des Lombards"
```

### Utility Endpoints

#### GET `/ai/available-options`
Get all available models, styles, and languages
```bash
curl http://localhost:8000/ai/available-options
```

#### GET `/ai/compare-models`
Compare multiple models side-by-side
```bash
curl -X GET "http://localhost:8000/ai/compare-models" \
  -F "file=@image.jpg" \
  -F "models=gpt-4-vision-preview" \
  -F "models=claude-3-5-sonnet-20241022"
```

---

## ğŸ’¡ Best Practices & Combinations

### Recommended Combinations

#### Maximum Quality
- **Analysis:** Claude 3.5 Sonnet
- **Caption:** GPT-4
- **Why:** Claude's excellent reasoning + GPT-4's creativity

#### Fastest Speed
- **Analysis:** Claude 3.5 Haiku
- **Caption:** Claude 3.5 Haiku
- **Why:** Both models are optimized for speed

#### Best Value
- **Analysis:** GPT-4 Vision
- **Caption:** Claude 3.5 Haiku
- **Why:** Detailed analysis + fast, cost-effective generation

#### Creative Maximum
- **Analysis:** GPT-4 Vision
- **Caption:** GPT-4
- **Why:** OpenAI stack for maximum creativity

### Use Cases by Style

- **Concert Promotion:** Energetic style, French or English
- **Artist Bio:** Professional style, multiple languages
- **Behind the Scenes:** Storytelling style, casual tone
- **Album Artwork:** Poetic style, artistic tone
- **Quick Updates:** Minimal style, any language

---

## ğŸ¯ Frontend Usage

### Enabling Advanced AI

1. Go to the Caption Generator tab
2. Click the **"Activer"** button on the purple Advanced AI banner
3. The advanced options panel will appear

### Selecting Options

#### Quick Mode (Default)
- Choose **Caption Style** (6 options)
- Choose **Language** (5 languages)
- Models are auto-selected for best results

#### Pro Mode
- Click **"Mode Pro"** in the options panel
- Select **Analysis Model** independently
- Select **Caption Model** independently
- Fine-tune style and language
- See a summary of your configuration

### Generating Captions

1. Upload your image
2. Configure AI options (if using Advanced mode)
3. Click **"GÃ©nÃ©ration automatique"**
4. Caption is generated with your selected models and style

---

## ğŸ” Setup Requirements

### 1. Install Dependencies

```bash
cd backend
pip install -r requirements
```

New dependencies:
- `anthropic==0.18.1` - Claude API client

### 2. Configure API Keys

Create `backend/.env`:

```env
# OpenAI (required for GPT-4 models)
OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic (required for Claude models)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
```

**Getting API Keys:**
- OpenAI: https://platform.openai.com/api-keys
- Anthropic: https://console.anthropic.com/

### 3. Run Enhanced Backend

```bash
cd backend
uvicorn app.main_enhanced:app --reload
```

Navigate to: http://localhost:8000/docs

You'll see the new `/ai/*` endpoints in the Swagger documentation.

---

## ğŸ“Š API Response Examples

### Analysis Response

```json
{
  "filename": "concert.jpg",
  "model_used": "claude-3-5-sonnet-20241022",
  "analysis": {
    "detected_objects": ["saxophone", "drummer", "musician", "stage"],
    "instruments": ["saxophone", "drums"],
    "musician_count": 2,
    "scene_type": "live_performance",
    "genre": "jazz",
    "subgenre": "bebop",
    "mood": "energetic and vibrant",
    "lighting": "warm stage lights with dramatic shadows",
    "dominant_colors": ["#1a1a2e", "#eebf3f", "#c73e1d"],
    "composition_quality": "professional",
    "suggested_filters": ["Clarendon", "Juno", "Lark"],
    "suggested_tags": ["#jazz", "#livemusic", "#bebop", ...],
    "confidence": 0.95,
    "caption_angle": "emphasize the energy and crowd engagement"
  }
}
```

### Caption Generation Response

```json
{
  "caption": "ğŸµ SoirÃ©e bebop inoubliable au Duc des Lombards ! L'Ã©nergie entre les musiciens Ã©tait Ã©lectrique, chaque note rÃ©sonnait avec passion. Un moment magique de jazz authentique. âœ¨\n\n#jazz #bebop #livemusic #ducdetlombards #jazzclub #musicien #concertparis #jazznight #liveperformance #musicpassion",
  "hashtags": ["#jazz", "#bebop", "#livemusic", ...],
  "style": "casual",
  "language": "fr",
  "model_used": "openai-gpt4"
}
```

---

## ğŸ› Troubleshooting

### "Claude API key not configured"
- Make sure `ANTHROPIC_API_KEY` is set in your `.env` file
- Restart the backend server after adding the key

### "Invalid authentication credentials"
- Check that your API keys are valid
- Ensure no extra spaces in the `.env` file
- Keys should start with `sk-` (OpenAI) or `sk-ant-` (Anthropic)

### Models not available
- Verify you have the correct API key for the provider
- Some models may require special access or billing setup
- Check the provider's console for account status

### Slow generation
- Use Claude Haiku for faster results
- Consider caching analysis results
- Use simpler styles for quicker generation

---

## ğŸ’° Cost Considerations

### Model Costs (Approximate)

**OpenAI:**
- GPT-4 Vision: ~$0.01-0.03 per image
- GPT-4: ~$0.03 per 1K tokens

**Anthropic:**
- Claude 3.5 Sonnet: ~$0.003 per 1K input tokens
- Claude 3.5 Haiku: ~$0.00025 per 1K input tokens

### Optimization Tips

1. **Use Haiku for bulk processing** - 10x cheaper than Sonnet
2. **Cache analysis results** - Don't re-analyze the same image
3. **Batch process** - Analyze multiple images at once
4. **Mix models** - Use expensive models only when necessary

---

## ğŸ‰ What's Next?

Upcoming features:
- **Image generation** with DALL-E 3 / Midjourney
- **Video analysis** for Reels and TikTok
- **Batch processing** for multiple images
- **Template library** with pre-configured styles
- **A/B testing** to compare model outputs
- **Performance analytics** to track which models work best

---

**Questions? Issues?**
Check the main `SETUP_GUIDE.md` or open an issue on GitHub.

**Happy caption generating with AI! ğŸš€ğŸ¤–**
